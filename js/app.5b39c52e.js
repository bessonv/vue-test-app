(function(){"use strict";var e={2873:function(e,t,o){var n=o(9242),i=o(3396);const r={class:"container"},a={key:0};function s(e,t,o,s,l,d){const h=(0,i.up)("OrgTable"),m=(0,i.up)("ModalForm");return(0,i.wg)(),(0,i.iD)("main",null,[(0,i._)("div",r,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Найти по ФИО","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchText=t),onKeyup:t[1]||(t[1]=(...t)=>e.handleTextChange&&e.handleTextChange(...t))},null,544),[[n.nr,e.searchText]]),(0,i._)("button",{onClick:t[2]||(t[2]=(...t)=>e.toggleModal&&e.toggleModal(...t))},"Добавить")]),(0,i.Wm)(h,{orgList:e.orgList,onRemoveItem:e.removeItem},null,8,["orgList","onRemoveItem"]),e.showModal?((0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(m,{onClose:e.toggleModal,onSave:e.addOrganization},null,8,["onClose","onSave"])])):(0,i.kq)("",!0)])}o(6699);var l=o(7139);const d={class:"backdrop"},h={class:"modal"},m=(0,i._)("h2",null,"Добавить организацию",-1),u=(0,i._)("label",null,"Название:",-1),g=(0,i._)("label",null,"Номер телефона:",-1),p={key:0,class:"warning"},c=(0,i._)("label",null,"ФИО директора",-1),v=["disabled"];function N(e,t,o,r,a,s){return(0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",h,[m,(0,i._)("form",null,[u,(0,i.wy)((0,i._)("input",{type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=t=>e.orgName=t),onKeyup:t[1]||(t[1]=(...t)=>e.isDataFilled&&e.isDataFilled(...t))},null,544),[[n.nr,e.orgName]]),g,(0,i.wy)((0,i._)("input",{type:"text",required:"","onUpdate:modelValue":t[2]||(t[2]=t=>e.phone=t),onKeyup:t[3]||(t[3]=(...t)=>e.isDataFilled&&e.isDataFilled(...t))},null,544),[[n.nr,e.phone]]),e.warning?((0,i.wg)(),(0,i.iD)("div",p,"Неверный формат номера телефона")):(0,i.kq)("",!0),c,(0,i.wy)((0,i._)("input",{type:"text",class:(0,l.C_)({warn:e.warning&&!e.dirName}),required:"","onUpdate:modelValue":t[4]||(t[4]=t=>e.dirName=t),onKeyup:t[5]||(t[5]=(...t)=>e.isDataFilled&&e.isDataFilled(...t))},null,34),[[n.nr,e.dirName]])]),(0,i._)("button",{onClick:t[6]||(t[6]=(...t)=>e.closeModal&&e.closeModal(...t))},"Отмена"),(0,i._)("button",{onClick:t[7]||(t[7]=(...t)=>e.saveForm&&e.saveForm(...t)),disabled:e.isDisabled},"Ок",8,v)])])}var f=(0,i.aZ)({name:"ModalForm",data(){return{orgName:"",phone:"",dirName:"",isDisabled:!0,warning:!1}},methods:{closeModal(){this.$emit("close")},saveForm(){this.isDataFilled()&&(Number(this.phone)&&this.phone.length>=6?this.$emit("save",{orgName:this.orgName,phone:this.phone,dirName:this.dirName}):this.warning=!0)},isDataFilled(){return this.orgName&&this.phone&&this.dirName?(this.isDisabled=!1,!0):(this.isDisabled=!0,!1)}}}),w=o(89);const y=(0,w.Z)(f,[["render",N]]);var b=y;const _={key:0,class:"wrapper"},O={class:"table"},k={class:"row-header"},D=["onClick"],z={key:0},x={key:1},T=(0,i._)("th",null,null,-1),C={class:"table-pagination"};function M(e,t,o,n,r,a){const s=(0,i.up)("OrgItem");return e.showTable?((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("table",O,[(0,i._)("tr",k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.headers,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.type,onClick:o=>e.toggleSort(o,t.type)},[(0,i.Uk)((0,l.zw)(t.name)+" ",1),e.sortType===t.type&&e.sortAsc?((0,i.wg)(),(0,i.iD)("span",z,"↓")):(0,i.kq)("",!0),e.sortType!==t.type||e.sortAsc?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",x,"↑"))],8,D)))),128)),T]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.onPage,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i.Wm)(s,{organization:t,onRemove:e.removeOrg},null,8,["organization","onRemove"])])))),128))]),(0,i._)("div",C,[(0,i._)("button",{onClick:t[0]||(t[0]=(...t)=>e.prevPage&&e.prevPage(...t))},"←"),(0,i._)("div",null,"Страница "+(0,l.zw)(e.page),1),(0,i._)("button",{onClick:t[1]||(t[1]=(...t)=>e.nextPage&&e.nextPage(...t))},"→")])])):(0,i.kq)("",!0)}function F(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("td",null,(0,l.zw)(e.organizationName),1),(0,i._)("td",null,(0,l.zw)(e.directorName),1),(0,i._)("td",null,(0,l.zw)(e.phone),1),(0,i._)("td",{class:"remove-button",onClick:t[0]||(t[0]=(...t)=>e.removeItem&&e.removeItem(...t))},"x")],64)}var P=(0,i.aZ)({name:"OrgItem",props:{organization:Object},methods:{removeItem(){this.$emit("remove",this.itemId)}},data(){return{itemId:0,organizationName:"",directorName:"",phone:""}},mounted(){if(this.organization){this.itemId=this.organization.id,this.organizationName=this.organization.orgName,this.directorName=this.organization.dirName;const e=this.organization.phone.match(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/),t=this.organization.phone.match(/(\d{2})(\d{2})(\d{2})/),o=e||t;o?(o.shift(),this.phone=o.join("-")):this.phone=this.organization.phone}}});const I=(0,w.Z)(P,[["render",F]]);var L=I,q=(0,i.aZ)({name:"OrgTable",components:{OrgItem:L},props:{orgList:{type:Array,required:!0},elementsOnPage:{type:Number,required:!1,default:5}},data(){return{list:[],headers:[{name:"Название",type:"orgName"},{name:"ФИО директора",type:"dirName"},{name:"Номер телефона",type:"phone"}],sortAsc:!1,sortType:"",showTable:!0,page:1}},mounted(){this.list=this.orgList},updated(){this.list=this.orgList},methods:{prevPage(){this.page>1&&this.page--},nextPage(){this.page<=Math.floor(this.list.length/this.elementsOnPage)&&this.page++},sort(e,t){const o=this.sortType;if(Object.prototype.hasOwnProperty.call(e,o)){const n=e[o],i=t[o],r=this.sortAsc?1:-1;return n<i?-1*r:n>i?1*r:0}return 0},toggleSort(e,t){this.sortType=t,this.sortAsc=!this.sortAsc,this.list.sort(this.sort)},removeOrg(e){this.$emit("removeItem",e)}},computed:{onPage(){return this.list.slice((this.page-1)*this.elementsOnPage,this.page*this.elementsOnPage)}}});const j=(0,w.Z)(q,[["render",M]]);var A=j;const Z=[{id:1,orgName:'ООО "Вектор"',dirName:"Иванов И.И.",phone:"70001234567"},{id:2,orgName:"ИП Сидоров С.С.",dirName:"Сидоров С.С.",phone:"70000567899"},{id:3,orgName:'ООО "Дреуг"',dirName:"Калинин Я.И.",phone:"75851514461"},{id:4,orgName:'ООО "Лпиов"',dirName:"Белозёров В.А.",phone:"722600111547"},{id:5,orgName:'ООО "Бцедс"',dirName:"Ситников А.С.",phone:"7651806765"},{id:6,orgName:'ООО "Нкуиш"',dirName:"Жуков А.Х.",phone:"717355467170"},{id:7,orgName:'ООО "Гнини"',dirName:"Тарасов Т.Д.",phone:"7914617263"},{id:8,orgName:'ООО "Еяпюп"',dirName:"Орлов А.А.",phone:"74410702448"},{id:9,orgName:'ООО "Юмеип"',dirName:"Фокин Д.А.",phone:"793471771805"},{id:10,orgName:'ООО "Лбигу"',dirName:"Беспалов И.Н.",phone:"72377232352"},{id:11,orgName:'ООО "Гмуфп"',dirName:"Овчинников А.Э.",phone:"7640339677"},{id:12,orgName:'ООО "Окэнэ"',dirName:"Новиков В.М.",phone:"7940396810"}];var K=Z;const U=K;var R=(0,i.aZ)({name:"App",data(){return{orgList:U,searchText:"",showModal:!1}},components:{ModalForm:b,OrgTable:A},methods:{removeItem(e){this.orgList=this.orgList.filter((t=>t.id!==e))},handleTextChange(e){const t=e.target.value;this.orgList=t?U.filter((e=>e.dirName.toLowerCase().includes(t))):U},toggleModal(){this.showModal=!this.showModal},addOrganization(e){const{orgName:t,phone:o,dirName:n}=e,i={id:U.length+1,orgName:t,phone:o,dirName:n};this.orgList.push(i),this.showModal=!1}}});const S=(0,w.Z)(R,[["render",s]]);var V=S;(0,n.ri)(V).mount("#app")}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,i,r){if(!n){var a=1/0;for(h=0;h<e.length;h++){n=e[h][0],i=e[h][1],r=e[h][2];for(var s=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(h--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[n,i,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,a=n[0],s=n[1],l=n[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var h=l(o)}for(t&&t(n);d<a.length;d++)r=a[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(h)},n=self["webpackChunkvue_test_app"]=self["webpackChunkvue_test_app"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(2873)}));n=o.O(n)})();
//# sourceMappingURL=app.5b39c52e.js.map